<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="user-scalable=no, width=device-width" />
	<meta name="apple-mobile-web-app-capable" content="yes">
	
	<title>Reading Tracker</title>
	<link rel="stylesheet" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
	<link rel="stylesheet" href="css/styles.css" />
	<link rel="stylesheet" href="css/readingModuleStyle.css" />
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
	<script src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
	<script src="js/scripts.js"></script>	
</head>
<body>
	<div data-role="page" id="wrapper">
		<header>
			<span id="site-title">Reading Tracker</span><span id="icon-wrapper">
				<span onclick="javascript: toDashboard();">p</span>
				<span>7</span>
				<span class="nav-selected" onclick="javascript: beginReading();">K</span>				
			</span>
		</header>
		<div id="content">
			<div id="block-Stats" class="block">
				<canvas id="canvas"></canvas>
			</div>
			<div id="block-Reading" class="block">
				<h2>Lorem to the Ipsum</h2>
				<div id="fakeText"></div>
			</div>
			<div id="block-Notes" class="block">
				<h2>Notes</h2>
				<div id="notes">
					<textarea></textarea>
					<textarea></textarea>
					<textarea></textarea>
					<textarea></textarea>
				</div>
			</div>
		</div>
	</div>
	
<script>getFakeText();</script>
<script>
	var canvas = document.getElementById('canvas');
	canvas.setAttribute("width", "800");
	canvas.setAttribute("height", "400");
	var context = canvas.getContext("2d");

	$('#canvas').mousedown(function(e){
		var mouseX = e.pageX;
		var mouseY = e.pageY;
			
		paint = true;
		addClick(e.pageX, e.pageY);
		redraw();
	});
	
	$('#canvas').mousemove(function(e){
		if(paint){
			addClick(e.pageX, e.pageY, true);
			redraw();
		}
	});
	
	$('#canvas').mouseup(function(e){
		paint = false;
	});
	
	$('#canvas').mouseleave(function(e){
		paint = false;
	});
	
	var clickX = new Array();
	var clickY = new Array();
	var clickDrag = new Array();
	var paint;

	function addClick(x, y, dragging)
	{
		clickX.push(x);
		clickY.push(y);
		clickDrag.push(dragging);
	}
	
	function redraw(){
		canvas.width = canvas.width; // Clears the canvas
		  
		context.strokeStyle = "#FBEC5D";
		context.lineJoin = "round";
		context.lineWidth = 15;
		context.globalAlpha = .25;
					
		for(var i=0; i < clickX.length; i++)
		{		
			context.beginPath();
			if(clickDrag[i] && i){
				context.moveTo(clickX[i-1], clickY[i-1]);
			}else{
				context.moveTo(clickX[i]-1, clickY[i]);
			}
				context.lineTo(clickX[i], clickY[i]);
				context.closePath();
				context.stroke();
			}
	}
</script>
</body>

</html>